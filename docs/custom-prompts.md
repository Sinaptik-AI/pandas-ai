# Custom prompts

In some cases, you may want to customize the prompts that are used by PandasAI. For example, you may want to use a different prompt for a specific use case to improve the results for certain types of queries.

With PandasAI, you can easily customize the prompts that are used by the library. You can do this by passing a `prompts` dictionary to the `PandasAI` constructor. The keys of the dictionary are the names of the prompts, and the values are the prompts themselves.

There are 5 types of prompts that you can override at the moment:

- `generate_python_code`: this is the prompt that is used to generate Python code from a natural language query. PandasAI uses this prompt as the standard prompt for the first query.

- `correct_error`: this is the prompt that is used to correct the generated Python code. Whenever the code generated by PandasAI is not correct, an exception is raised and a new call to the LLM is made with this prompt to correct the error.

## How to create custom prompts

To create your custom prompt create a new CustomPromptClass inherited from base `Prompt` class.

```python
from pandasai import SmartDataframe
from pandasai.prompts import AbstractPrompt


class MyCustomPrompt(AbstractPrompt):
    @property
    def template(self):
        return """This is your custom text for your prompt with custom {my_custom_value}"""

    def setup(self, kwargs):
        # This method is called before the prompt is initialized
        # You can use it to setup your prompt and pass any additional
        # variables to the template
        self.set_var("my_custom_value", kwargs["my_custom_value"])


df = SmartDataframe("data.csv", config={
    "custom_prompts": {
        "generate_python_code": MyCustomPrompt(
            my_custom_value="my custom value")
    }
})
```

You can also use `FileBasedPrompt` in case you prefer to store prompt template in a file:

_my_prompt_template.tmpl:_

```
This is your custom text for your prompt with custom {my_custom_value}
```

_python code:_

```python
from pandasai import SmartDataframe
from pandasai.prompts import FileBasedPrompt


class MyCustomFileBasedPrompt(FileBasedPrompt):
    _path_to_template = "path/to/my_prompt_template.tmpl"


df = SmartDataframe("data.csv", config={
    "custom_prompts": {
        "generate_python_code": MyCustomFileBasedPrompt(
            my_custom_value="my custom value")
    }
})
```

## Using dynamic prompt values

### Variable interpolation

You can directly access the default prompt variables (for example dfs, conversation, etc) and call their methods from prompt text itself.

```python
from pandasai import SmartDataframe
from pandasai.prompts import AbstractPrompt


class MyCustomPrompt(AbstractPrompt):
    template = """You are given a dataframe with number if rows equal to {dfs[0].shape[0]} and number of columns equal to {dfs[0].shape[1]}

Here's the conversation:
{conversation}
"""


df = SmartDataframe("data.csv", config={
    "custom_prompts": {
        "generate_python_code": MyCustomPrompt()
    }
})
```
