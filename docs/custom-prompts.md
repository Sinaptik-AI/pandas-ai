# Custom prompts

In some cases, you may want to customize the prompts that are used by PandasAI. For example, you may want to use a different prompt for a specific use case to improve the results for certain types of queries.

With PandasAI, you can easily customize the prompts that are used by the library. You can do this by passing a `prompts` dictionary to the `PandasAI` constructor. The keys of the dictionary are the names of the prompts, and the values are the prompts themselves.

There are 5 types of prompts that you can override at the moment:

- `generate_python_code`: this is the prompt that is used to generate Python code from a natural language query. PandasAI uses this prompt as the standard prompt for the first query.

- `correct_error`: this is the prompt that is used to correct the generated Python code. Whenever the code generated by PandasAI is not correct, an exception is raised and a new call to the LLM is made with this prompt to correct the error.

- `generate_response`: this is the prompt that is used to generate the natural language response based on the result of the generated Python code.

## How to create custom prompts

To create your custom prompt create a new CustomPromptClass inherited from base `Prompt` class.

```python
from pandasai import SmartDataframe
from pandasai.prompts import Prompt

class MyCustomPrompt(Prompt):
    text = """This is your custom text for your prompt with custom {value}"""

df = SmartDataframe("data.csv", {
    "custom_prompts": {
        "generate_python_code": MyCustomPrompt(value="my custom value")
    }
})
```

## Using dynamic prompt values

### Variable interpolation

You can directly access df object and call its methods from prompt text itself. To do this you need to use $ as prefix and call the desired method.

```python
from pandasai import SmartDataframe
from pandasai.prompts import Prompt

class MyCustomPrompt(Prompt):
    text = """You are given a dataframe with number if rows equal to $dfs[0].shape[0] and number of columns equal to $dfs[0].shape[1]"""

df = SmartDataframe("data.csv", {
    "custom_prompts": {
        "generate_python_code": MyCustomPrompt()
    }
})
```

### Default value override

Each prompt type mentioned in first section has some default values which are passed in in case if custom prompt is not provided. For example, in case of generate_python_code prompt `num_columns`, `num_rows` and `df_head` values are passed in the default `GeneratePythonCodePrompt`. If you wish to use any of the default values passed to prompt in your custom prompt you can use variable name of that default value with underscore as prefix.

```python
from pandasai import SmartDataframe
from pandasai.prompts import Prompt

class MyCustomPrompt(Prompt):
    text = """You are given a dataframe with number of rows equal to {_num_rows} and number of columns equal to {_num_columns}"""

df = SmartDataframe("data.csv", {
    "custom_prompts": {
        "generate_python_code": MyCustomPrompt()
    }
})
```
