# Middlewares

Middlewares are used to modify the code generated by `pandasai` before it is executed. This allows the user to add custom functionality to the generated code or tailor the generated code to their specific use case.

You can pass a list of middlewares to the `PandasAI` constructor:

```python
pandas_ai = PandasAI(llm, middlewares=[middleware1, middleware2])
```

or you can add middlewares to the `PandasAI` object after it has been created:

```python
pandas_ai = PandasAI(llm)
pandas_ai.add_middlewares(middleware1)
pandas_ai.add_middlewares(middleware2)
```

## Creating a middleware

A middleware is a class that implements the `Middleware` interface. The interface has one method, `run`, which takes a `code` parameter and returns a modified version of the code.

```python
class MyCustomMiddleware:
    def run(self, code: str) -> str:
        # do some changes to the code

        return code
```

## Example

The following example shows how to create a middleware that adds a `print` statement to the generated code:

```python
from pandasai.middlewares.base import Middleware

class PrintMiddleware(Middleware):
    def run(self, code: str) -> str:
        return f"print('Hello, world!')\n{code}"
```

The middleware can then be used as follows:

```python
pandas_ai = PandasAI(llm, middlewares=[PrintMiddleware()])
```

## Built-in middlewares

`pandasai` comes with a few built-in middlewares that can be used to modify the generated code.

### `StreamlitMiddleware`

The `StreamlitMiddleware` middleware adds the compatibility required to run the generated code in a Streamlit app.

```python
from pandasai import PandasAI
from pandasai.middlewares.streamlit import StreamlitMiddleware

pandas_ai = PandasAI(llm, middlewares=[StreamlitMiddleware()])
```
